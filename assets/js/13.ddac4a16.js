(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{435:function(t,a,s){"use strict";s.r(a);var e=s(65),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"webpack-常见-loader-和-plugin-有哪些-二者的区别是什么"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webpack-常见-loader-和-plugin-有哪些-二者的区别是什么"}},[t._v("#")]),t._v(" webpack 常见 loader 和 plugin 有哪些？二者的区别是什么？")]),t._v(" "),s("h3",{attrs:{id:"常见-loader"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#常见-loader"}},[t._v("#")]),t._v(" 常见 loader")]),t._v(" "),s("p",[t._v("在 webpack 文档里写了：")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://webpack.js.org/loaders/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Loaders | webpack"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("你可以记住：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("babel-loader")]),t._v(" 把 JS/TS（ES6） 变成 JS（ES5）")]),t._v(" "),s("li",[s("code",[t._v("ts-loader")]),t._v(" 把 TS 变成 JS，"),s("strong",[t._v("并提示类型错误")])]),t._v(" "),s("li",[s("code",[t._v("markdown-loader")]),t._v(" 把 markdown 变成 html")]),t._v(" "),s("li",[s("code",[t._v("html-loader")]),t._v(" 把 html 变成 JS 字符串")]),t._v(" "),s("li",[s("code",[t._v("sass-loader")]),t._v(" 把 SASS/SCSS 变成 CSS")]),t._v(" "),s("li",[s("code",[t._v("css-loader")]),t._v(" 把 CSS 变成 JS 字符串")]),t._v(" "),s("li",[s("code",[t._v("style-loader")]),t._v(" 把 JS 字符串变成 style 标签")]),t._v(" "),s("li",[s("code",[t._v("postcss-loader")]),t._v(" 把 CSS 变成更优化的 CSS")]),t._v(" "),s("li",[s("code",[t._v("vue-loader")]),t._v(" 把单文件组件（SFC）变成 JS 模块")]),t._v(" "),s("li",[s("code",[t._v("file-loader")]),t._v(" 把文件输出到一个文件夹中，在代码中通过相对 URL 去引用输出的文件")]),t._v(" "),s("li",[s("code",[t._v("url-loader")]),t._v(" 和 file-loader 类似，但是能在文件很小的情况下以 base64 的方式把文件内容注入到代码中去")]),t._v(" "),s("li",[s("code",[t._v("eslint-loader")]),t._v(" 通过 ESLint 检查 JavaScript 代码规范，"),s("strong",[t._v("并提示类型错误")])]),t._v(" "),s("li",[s("code",[t._v("thread-loader")]),t._v(" 用于多进程打包")]),t._v(" "),s("li",[s("code",[t._v("source-map-loader")]),t._v(" 加载额外的 Source Map 文件，以方便代码调试")])]),t._v(" "),s("h3",{attrs:{id:"常见-plugin"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#常见-plugin"}},[t._v("#")]),t._v(" 常见 plugin")]),t._v(" "),s("p",[t._v("也在 webpack 文档里写了：")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://webpack.js.org/plugins/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Plugins | webpack"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("你可以记住这些：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("UglifyJsPlugin")]),t._v(" 压缩和混淆代码")]),t._v(" "),s("li",[s("code",[t._v("html-webpack-plugin")]),t._v(" 用于创建 HTML 页面并自动引入 JS 和 CSS")]),t._v(" "),s("li",[s("code",[t._v("clean-webpack-plugin")]),t._v(" 用于清理之前打包的残余文件")]),t._v(" "),s("li",[s("code",[t._v("mini-css-extract-plugin")]),t._v(" 用于将 JS 中的 CSS 抽离成单独的 CSS 文件")]),t._v(" "),s("li",[s("code",[t._v("HotModuleReplacementPlugin")]),t._v(" 热跟新")]),t._v(" "),s("li",[s("code",[t._v("SplitChunksPlugin")]),t._v(" 用于代码分包（Code Split）")]),t._v(" "),s("li",[s("code",[t._v("DllPlugin")]),t._v(" + "),s("code",[t._v("DllReferencePlugin")]),t._v(" 用于避免大依赖被频繁重新打包，大幅降低打包时间\n"),s("ul",[s("li",[s("a",{attrs:{href:"https://segmentfault.com/a/1190000016567986",target:"_blank",rel:"noopener noreferrer"}},[t._v("webpack 使用-详解 DllPlugin"),s("OutboundLink")],1)])])]),t._v(" "),s("li",[s("code",[t._v("CommonsChunkPlugin")]),t._v(" 提高打包效率，将第三方库和业务代码分开打包")]),t._v(" "),s("li",[s("code",[t._v("DefinePlugin")]),t._v(" 用于在 webpack config 里添加全局变量")]),t._v(" "),s("li",[s("code",[t._v("copy-webpack-plugin")]),t._v(" 用于拷贝静态文件到 dist")]),t._v(" "),s("li",[s("code",[t._v("webpack-bundle-analyzer")]),t._v(" 代码分析；")])]),t._v(" "),s("h3",{attrs:{id:"二者的区别"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二者的区别"}},[t._v("#")]),t._v(" 二者的区别")]),t._v(" "),s("ul",[s("li",[t._v("loader 是文件加载器，让 webpack 拥有加载和解析非 JavaScript 文件的能力\n"),s("ul",[s("li",[t._v("功能：能够对文件进行编译、优化、混淆（压缩）等，比如 babel-loader / vue-loader")]),t._v(" "),s("li",[t._v("运行时机：在创建最终产物之前运行")])])]),t._v(" "),s("li",[t._v("plugin 是 webpack 插件（这句废话也很重要）\n"),s("ul",[s("li",[t._v("功能：能实现更多功能，比如定义全局变量、Code Split、加速编译等 （基于事件机制工作，会监听 webpack 打包过程中的某些事件，执行改变输出结果的任务）")]),t._v(" "),s("li",[t._v("运行时机：在整个打包过程（以及前后）都能运行")])])])]),t._v(" "),s("h2",{attrs:{id:"webpack-怎么写一个-plugin-和-loader"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webpack-怎么写一个-plugin-和-loader"}},[t._v("#")]),t._v(" webpack 怎么写一个 plugin 和 loader")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/woai3c/Front-end-articles/issues/6",target:"_blank",rel:"noopener noreferrer"}},[t._v("实现一个 webpack loader 和 webpack plugin"),s("OutboundLink")],1)]),t._v(" "),s("h2",{attrs:{id:"babel-编译原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#babel-编译原理"}},[t._v("#")]),t._v(" babel 编译原理")]),t._v(" "),s("blockquote",[s("p",[t._v("查看 AST https://astexplorer.net/")])]),t._v(" "),s("ul",[s("li",[t._v("babylon 将 ES6/ES7 代码解析成 AST")]),t._v(" "),s("li",[t._v("babel-traverse 对 AST 进行遍历转译，得到新的 AST")]),t._v(" "),s("li",[t._v("新 AST 通过 babel-generator 转换成 ES5")])]),t._v(" "),s("h2",{attrs:{id:"webpack-如何解决开发时的跨域问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webpack-如何解决开发时的跨域问题"}},[t._v("#")]),t._v(" webpack 如何解决开发时的跨域问题？")]),t._v(" "),s("p",[t._v("在开发时，我们的页面在 "),s("code",[t._v("localhost:8080")]),t._v("，JS 直接访问后端接口（如 "),s("code",[t._v("https://xiedaimala.com")]),t._v(" 或 "),s("code",[t._v("http://localhost:3000")]),t._v("）会报跨域错误。")]),t._v(" "),s("p",[t._v("为了解决这个问题，可以在 webpack.config.js 中添加如下配置：")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//...")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("devServer")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("proxy")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"/api"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("target")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://xiedaimala.com"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("changeOrigin")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("此时，在 JS 中请求 "),s("code",[t._v("/api/users")]),t._v(" 就会自动被代理到 "),s("code",[t._v("http://xiedaimala.com/api/users")]),t._v(" 。")]),t._v(" "),s("p",[t._v("如果希望请求中的 Origin 从 8080 修改为 xiedaimala.com，可以添加 "),s("code",[t._v("changeOrigin: true")]),t._v(" 。")]),t._v(" "),s("p",[t._v("如果要访问的是 HTTPS API，那么就需要配置 HTTPS 证书，否则会报错。")]),t._v(" "),s("p",[t._v("不过，如果在 target 下面添加 "),s("code",[t._v("secure: false")]),t._v(" ，就可以不配置证书且忽略 HTTPS 报错。")]),t._v(" "),s("p",[t._v("总之，记住常用选项就行了。")]),t._v(" "),s("h2",{attrs:{id:"webpack-如何实现-tree-shaking"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webpack-如何实现-tree-shaking"}},[t._v("#")]),t._v(" webpack 如何实现 tree-shaking？")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://webpack.js.org/guides/tree-shaking/#conclusion",target:"_blank",rel:"noopener noreferrer"}},[t._v("Tree Shaking | webpack"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://webpack.docschina.org/guides/tree-shaking/#conclusion",target:"_blank",rel:"noopener noreferrer"}},[t._v("Tree Shaking | webpack 中文文档"),s("OutboundLink")],1)]),t._v(" "),s("h3",{attrs:{id:"是什么"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#是什么"}},[t._v("#")]),t._v(" 是什么")]),t._v(" "),s("p",[t._v("tree-shaking 就是让没有用到的 JS 代码不打包，以减小包的体积。")]),t._v(" "),s("h3",{attrs:{id:"怎么做"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#怎么做"}},[t._v("#")]),t._v(" 怎么做")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("怎么删")]),t._v(" "),s("ol",[s("li",[t._v("使用 ES Modules 语法（即 ES6 的 import 和 export 关键字）")]),t._v(" "),s("li",[t._v("CommonJS 语法无法 tree-shaking（即 require 和 exports 语法）\n"),s("ul",[s("li",[t._v("需要给 bebel-loader 添加 "),s("code",[t._v("modules: false")]),t._v(" 选项（避免 babel 将 js 自动编译为 CommonJS ）")])])]),t._v(" "),s("li",[t._v("引入的时候只引用需要的模块\n"),s("ul",[s("li",[t._v("要写 "),s("code",[t._v("import {cloneDeep} from 'lodash-es'")]),t._v(" 因为方便 tree-shaking")]),t._v(" "),s("li",[t._v("不要写 "),s("code",[t._v("import _ from 'lodash'")]),t._v(" 因为会导致无法 tree-shaking 无用模块")])])])])]),t._v(" "),s("li",[s("p",[t._v("怎么不删：在 package.json 中配置 "),s("code",[t._v("sideEffects")]),t._v("，防止某些文件被删掉")]),t._v(" "),s("ol",[s("li",[t._v("比如我 import 了 x.js，而 x.js 只是添加了 "),s("code",[t._v("window.x")]),t._v(" 属性，那么 x.js 就要放到 sideEffects 里")]),t._v(" "),s("li",[t._v("比如所有被 import 的 CSS 都要放在 sideEffects 里")])])]),t._v(" "),s("li",[s("p",[t._v("怎么开启：在 webpack config 中将 mode 设置为 production（开发环境没必要 tree-shaking）")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("mode: production")]),t._v(" 给 webpack 加了非常多"),s("a",{attrs:{href:"https://github.com/webpack/webpack/blob/f43047c4c2aa4b0a315328e4c34a319dc2662254/lib/config/defaults.js#L1125",target:"_blank",rel:"noopener noreferrer"}},[t._v("优化"),s("OutboundLink")],1),t._v("。")])])])]),t._v(" "),s("p",[t._v("原理： tree-shaking 通过静态分析，对代码进行扫描分析，经过词法分析、语法分析、AST 树等分析手段，识别未被引用的代码，标记为冗余代码，真正剔除操作一般是 uglifyjs 模块。")]),t._v(" "),s("h2",{attrs:{id:"webpack-热更新原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webpack-热更新原理"}},[t._v("#")]),t._v(" webpack 热更新原理")]),t._v(" "),s("p",[t._v("webpack 在热更新模式下，启动服务后，服务端会与客户端建立一个长连接（websocket）。文件修改后，服务端会通过长链接向客户端推送一条消息，客户端收到后，会重新请求一个 js 文件，返回的 js 文件会调用 webpackHotUpdatehmr 方法，用于替换掉 "),s("strong",[t._v("webpack_modules")]),t._v(" 中的部分代码。")]),t._v(" "),s("ol",[s("li",[t._v("webpack-dev-server 启动本地服务，与 Client 建立长连接")]),t._v(" "),s("li",[t._v("Webpack 监听文件修改，修改后通过长连接通知客户端；")]),t._v(" "),s("li",[t._v("Client 重新请求文件，替换 "),s("strong",[t._v("webpack_modules")]),t._v(" 中对应部分")])]),t._v(" "),s("h2",{attrs:{id:"如何利用-webpack-来优化前端性能"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如何利用-webpack-来优化前端性能"}},[t._v("#")]),t._v(" 如何利用 webpack 来优化前端性能")]),t._v(" "),s("p",[t._v("webpack 做性能优化主要是考虑打包体积和打包速度。")]),t._v(" "),s("p",[t._v("打包体积分析用 "),s("code",[t._v("webpack-bundle-analyzer")]),t._v(" 插件，速度分析用："),s("code",[t._v("speed-measure-webpack-plugin")]),t._v(" 插件。")]),t._v(" "),s("h2",{attrs:{id:"如何提高-webpack-构建速度"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如何提高-webpack-构建速度"}},[t._v("#")]),t._v(" 如何提高 webpack 构建速度？")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://webpack.docschina.org/guides/build-performance/",target:"_blank",rel:"noopener noreferrer"}},[t._v("构建性能 | webpack 中文文档"),s("OutboundLink")],1)]),t._v(" "),s("ol",{attrs:{start:"0"}},[s("li",[t._v("webpack-bundle-analyzer 分析模块体积，针对性优化，如：vue、vue-router 通过 externals 通过外部依赖配置 CDN 引用")]),t._v(" "),s("li",[t._v("使用 DllPlugin 将不常变化的代码提前打包，并复用，如 vue、react")]),t._v(" "),s("li",[t._v("使用 thread-loader 或 HappyPack（过时）进行多线程打包")]),t._v(" "),s("li",[t._v("处于开发环境时，在 webpack config 中将 cache 设为 true（缓存持久化），也可用 cache-loader（过时）")]),t._v(" "),s("li",[t._v("处于生产环境时，关闭不必要的环节，比如可以关闭 source map")]),t._v(" "),s("li",[t._v("网传的 HardSourceWebpackPlugin 已经一年多没更新了，谨慎使用")])]),t._v(" "),s("h2",{attrs:{id:"webpack-能做哪些性能优化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webpack-能做哪些性能优化"}},[t._v("#")]),t._v(" webpack 能做哪些性能优化")]),t._v(" "),s("ol",[s("li",[t._v("压缩代码")]),t._v(" "),s("li",[t._v("tree-shaking")]),t._v(" "),s("li",[t._v("根据文件内容生成 hash 当作文件名，配合 CDN 做文件缓存")]),t._v(" "),s("li",[t._v("分割代码，按需加载")]),t._v(" "),s("li",[t._v("将第三方插件或公共代码单独提取出来打包")])]),t._v(" "),s("p",[s("a",{attrs:{href:"https://juejin.cn/post/6844903651291447309",target:"_blank",rel:"noopener noreferrer"}},[t._v("三十分钟掌握 Webpack 性能优化"),s("OutboundLink")],1)]),t._v(" "),s("h3",{attrs:{id:"webpack-模块加载原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webpack-模块加载原理"}},[t._v("#")]),t._v(" webpack 模块加载原理")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://juejin.cn/post/6872354325553741838",target:"_blank",rel:"noopener noreferrer"}},[t._v("深入了解 webpack 模块加载原理"),s("OutboundLink")],1)]),t._v(" "),s("h3",{attrs:{id:"webpack-的构建流程是什么"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webpack-的构建流程是什么"}},[t._v("#")]),t._v(" webpack 的构建流程是什么")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://juejin.cn/post/6844904000169607175",target:"_blank",rel:"noopener noreferrer"}},[t._v("webpack 构建流程分析"),s("OutboundLink")],1)]),t._v(" "),s("h3",{attrs:{id:"webpack-的分包策略"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webpack-的分包策略"}},[t._v("#")]),t._v(" webpack 的分包策略")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://panjiachen.github.io/awesome-bookmarks/blog/webpack/webpack4-b.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("webpack 的分包策略"),s("OutboundLink")],1)]),t._v(" "),s("h2",{attrs:{id:"webpack-与-vite-的区别是什么"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webpack-与-vite-的区别是什么"}},[t._v("#")]),t._v(" webpack 与 vite 的区别是什么？")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("开发环境区别")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("vite 自己实现 server，不对代码打包，充分利用浏览器对 "),s("code",[t._v("<script type=module>")]),t._v(" 的支持")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("假设 main.js 引入了 vue")])]),t._v(" "),s("li",[s("p",[t._v("该 server 会把 "),s("code",[t._v("import { createApp } from 'vue'")]),t._v(" 改为 "),s("code",[t._v('import { createApp } from "/node_modules/.vite/vue.js"')]),t._v(" 这样浏览器就知道去哪里找 vue.js 了")])])])]),t._v(" "),s("li",[s("p",[t._v("webpack-dev-server 常使用 babel-loader 基于内存打包，比 vite 慢很多很多很多")]),t._v(" "),s("ol",[s("li",[t._v("该 server 会把 vue.js 的代码（递归地）打包进 main.js")])])])])]),t._v(" "),s("li",[s("p",[t._v("生产环境区别")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("vite 使用 rollup + esbuild 来打包 JS 代码")])]),t._v(" "),s("li",[s("p",[t._v("webpack 使用 babel 来打包 JS 代码，比 esbuild 慢很多很多很多")]),t._v(" "),s("ol",[s("li",[t._v("webpack 能使用 esbuild 吗？可以，你要自己配置（很麻烦）。")])])])])]),t._v(" "),s("li",[s("p",[t._v("文件处理时机")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("vite 只会在你请求某个文件的时候处理该文件")])]),t._v(" "),s("li",[s("p",[t._v("webpack 会提前打包好 main.js，等你请求的时候直接输出打包好的 JS 给你")])])])])]),t._v(" "),s("p",[t._v("目前已知 vite 的缺点有：")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("热更新常常失败，原因不清楚（F5, ctrl + R）")])]),t._v(" "),s("li",[s("p",[t._v("有些功能 rollup 不支持，需要自己写 rollup 插件")])]),t._v(" "),s("li",[s("p",[t._v("不支持非现代浏览器（浏览器需要支持"),s("code",[t._v("<script type=module>")]),t._v(" ）")])])]),t._v(" "),s("h2",{attrs:{id:"webpack-和-rollup-的区别"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webpack-和-rollup-的区别"}},[t._v("#")]),t._v(" webpack 和 rollup 的区别")]),t._v(" "),s("p",[t._v("webpack 优点：")]),t._v(" "),s("ol",[s("li",[t._v("通过 loader 处理各种各样的资源依赖")]),t._v(" "),s("li",[t._v("HMR 模块热替换")]),t._v(" "),s("li",[t._v("按需加载")]),t._v(" "),s("li",[t._v("提取公共模块")])]),t._v(" "),s("p",[t._v("rollup 优点：")]),t._v(" "),s("ol",[s("li",[t._v("编译出来的代码"),s("code",[t._v("可读性好")])]),t._v(" "),s("li",[t._v("rollup 打包后生成的 bundle 内容十分"),s("code",[t._v("干净")]),t._v("，没有什么多余的代码。相比 webpack(webpack 打包后会生成"),s("strong",[t._v("webpack_require")]),t._v("等 runtime 代码)，rollup 拥有无可比拟的性能优势，这是由依赖处理方式决定的，"),s("code",[t._v("编译时依赖处理（rollup）自然比运行时依赖处理（webpack）性能更好")])]),t._v(" "),s("li",[t._v("对于 ES 模块依赖库，rollup 会静态分析代码中的 import，并将排除任何未实际使用的代码")]),t._v(" "),s("li",[t._v("支持程序流分析，能更加正确的判断项目本身的代码是否有副作用(配合 tree-shaking)")]),t._v(" "),s("li",[t._v("支持导出"),s("code",[t._v("es")]),t._v("模块文件（webpack 不支持导出 es 模块）")])]),t._v(" "),s("p",[t._v("参考资料：")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/75717476",target:"_blank",rel:"noopener noreferrer"}},[t._v("【第九期】Rollup：下一代 ES 模块打包工具"),s("OutboundLink")],1)])]),t._v(" "),s("h2",{attrs:{id:"webpack-怎么配置多页应用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webpack-怎么配置多页应用"}},[t._v("#")]),t._v(" webpack 怎么配置多页应用？")]),t._v(" "),s("p",[t._v("这是对应的 webpack config：")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" HtmlWebpackPlugin "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"html-webpack-plugin"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nmodule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("entry")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("app")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./src/app.js"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("admin")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./src/admin.js"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("plugins")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HtmlWebpackPlugin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("filename")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"index.html"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("chunks")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"app"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HtmlWebpackPlugin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("filename")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"admin.html"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("chunks")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"admin"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("但是，这样配置会有一个「重复打包」的问题：假设 app.js 和 admin.js 都引入了 vue.js，那么 vue.js 的代码既会打包进 app.js，也会打包进 admin.js。我们需要使用 "),s("code",[t._v("optimization.splitChunks")]),t._v(" 将共同依赖单独打包成 common.js（HtmlWebpackPlugin 会自动引入 common.js）。")]),t._v(" "),s("h3",{attrs:{id:"webpack-如何支持无限多页面呢"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webpack-如何支持无限多页面呢"}},[t._v("#")]),t._v(" webpack 如何支持无限多页面呢？")]),t._v(" "),s("p",[t._v("写点 Node.js 代码不就实现了么？")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" HtmlWebpackPlugin "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"html-webpack-plugin"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fs "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"fs"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" path "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"path"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" filenames "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" fs\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("readdirSync")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./src/pages"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("filter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("file")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" file"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("endsWith")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('".js"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("map")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("file")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("basename")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("file"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('".js"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" entries "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" filenames"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("reduce")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("result"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("result"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("./src/pages/")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v(".js")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" plugins "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" filenames"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("map")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HtmlWebpackPlugin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("filename")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" name "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('".html"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("chunks")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nmodule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("entry")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("entries"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("plugins")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("plugins"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"swc、esbuild-是什么"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#swc、esbuild-是什么"}},[t._v("#")]),t._v(" swc、esbuild 是什么？")]),t._v(" "),s("h3",{attrs:{id:"swc"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#swc"}},[t._v("#")]),t._v(" swc")]),t._v(" "),s("p",[t._v("实现语言：Rust")]),t._v(" "),s("p",[t._v("功能：编译 JS/TS、打包 JS/TS")]),t._v(" "),s("p",[t._v("优势：比 babel 快很多很多很多（20 倍以上）")]),t._v(" "),s("p",[t._v("能否集成进 webpack：能")]),t._v(" "),s("p",[t._v("使用者：Next.js、Parcel、Deno、Vercel、ByteDance、Tencent、Shopify……")]),t._v(" "),s("p",[t._v("做不到：")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("对 TS 代码进行类型检查（用 tsc 可以）")])]),t._v(" "),s("li",[s("p",[t._v("打包 CSS、SVG")])])]),t._v(" "),s("h3",{attrs:{id:"esbuild"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#esbuild"}},[t._v("#")]),t._v(" esbuild")]),t._v(" "),s("p",[t._v("实现语言：Go")]),t._v(" "),s("p",[t._v("功能：同上")]),t._v(" "),s("p",[t._v("优势：比 babel 快很多很多很多很多很多很多（10~100 倍）")]),t._v(" "),s("p",[t._v("能否集成进 webpack：能")]),t._v(" "),s("p",[t._v("使用者：vite、vuepress、snowpack、umijs、blitz.js 等")]),t._v(" "),s("p",[t._v("做不到：")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("对 TS 代码进行类型检查")])]),t._v(" "),s("li",[s("p",[t._v("打包 CSS、SVG")])])])])}),[],!1,null,null,null);a.default=n.exports}}]);